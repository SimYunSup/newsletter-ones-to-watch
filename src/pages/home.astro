---
import { getCollection } from "astro:content";
import Layout from "@/components/BasicLayout.astro";
import Post from "@/components/Post.astro";
import Favicon from "@/assets/favicon.svg";
import "@/styles/home.css";

export const prerender = false;
const collection = await getCollection("news");

if (!collection) {
  return Astro.redirect("/404");
}
const list = collection.sort(
  (a, b) => (b.data.properties.날짜?.start.getTime() ?? 0) - (a.data.properties.날짜?.start.getTime() ?? 0))
  .slice(0, 8);
const length = collection.length;
---

<Layout
  pageTitle={"Ones To Watch for FrontEnd"}
  description={"프론트엔드에 대한 정보들을 매주 큐레이션해드립니다."}
>
  <Fragment slot="head">
    <meta
      name="description"
      content="프론트엔드에 대한 정보들을 매주 큐레이션해드립니다."
    />
  </Fragment>
  <article class="container section">
    <h1 class="title">
      <Favicon class="logo" />
      <span class="text">Ones To Watch <span class="sub">for</span> FrontEnd</span>
    </h1>
    <h2 class="description">
      프론트엔드에 대한 정보들을 매주 큐레이션해드립니다.
    </h2>
    <div class="stats-container">
      <div class="stat-item">
        <div class="stat-number">{length}개</div>
        <div class="stat-label">아티클</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">매주</div>
        <div class="stat-label">업데이트</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">2023.09~</div>
        <div class="stat-label">운영 시작</div>
      </div>
    </div>
  </article>

  <article class="container features-section">
    <h3 class="features-section-title">왜 Ones To Watch를 선택해야 할까요?</h3>
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">📚</div>
        <div class="feature-content">
          <h4 class="feature-title">매일 큐레이션</h4>
          <p class="feature-description">
            매일 국내외 프론트엔드 생태계를 모니터링하고 가치 있는 콘텐츠를 직접 선별합니다.
            뉴스, 튜토리얼, 라이브러리 릴리즈부터 커뮤니티 논의까지 놓치지 마세요.
          </p>
        </div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">📬</div>
        <div class="feature-content">
          <h4 class="feature-title">주간 레터</h4>
          <p class="feature-description">
            바쁜 일정 속에서도 최신 정보를 놓치지 않도록 매주 엄선된 콘텐츠를 이메일로 전달합니다.
            구독자들은 시간을 절약하면서도 트렌드를 파악할 수 있습니다.
          </p>
        </div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">🔍</div>
        <div class="feature-content">
          <h4 class="feature-title">실무 중심 콘텐츠</h4>
          <p class="feature-description">
            실제 프로젝트에 바로 적용할 수 있는 실용적인 정보를 제공합니다.
            새로운 기술 스택, 개발 도구, 성능 최적화 기법 등 실무에 도움되는 내용을 다룹니다.
          </p>
        </div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">📖</div>
        <div class="feature-content">
          <h4 class="feature-title">완전한 아카이브</h4>
          <p class="feature-description">
            2023년 9월부터 지금까지의 모든 뉴스레터를 웹에서 검색하고 다시 볼 수 있습니다.
            과거 콘텐츠도 여전히 가치있는 학습 자료로 활용하세요.
          </p>
        </div>
      </div>
    </div>
  </article>
  <article class="container card-section">
    <h3 class="card-section-title">최신 정보</h3>
    <ul
      class="card-grid"
    >
      {
        list.map((post) => (
          <Post post={post} />
        ))
      }
    </ul>
    <div class="newsletter-form">
      <div class="form-title">최신 정보를 놓치지 마세요!</div>
      <script async data-uid="c7b118d8c2" src="https://ones-to-watch-for-frontend.kit.com/c7b118d8c2/index.js"></script>
    </div>
  </article>
</Layout>
